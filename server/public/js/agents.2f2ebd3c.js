(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["agents"],{9392:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-flex",{attrs:{xs12:"",sm12:"",md12:"",lg12:""}},[a("v-toolbar",{staticClass:"elevation-0 teal--text text--darken-4",attrs:{color:"teal lighten-5"}},[a("v-toolbar-title",[t._v(t._s(t.title))]),a("v-spacer"),a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){return[a("v-btn",t._g({attrs:{icon:""},on:{click:t.mounteAgentsTableComponent}},e.on),[a("v-icon",{attrs:{color:"teal darken-2"}},[t._v("fas fa-list-alt")])],1)]}}])},[a("span",[t._v("list of all the agents")])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){return[a("v-btn",t._g({attrs:{icon:""},on:{click:t.mounteAddAgentComponent}},e.on),[a("v-icon",{attrs:{color:"teal darken-2"}},[t._v("fas fa-plus-circle")])],1)]}}])},[a("span",[t._v("add new agnet")])])],1),a(t.currentComponent,{tag:"v-card"})],1)},s=[],n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"pt-3 elevation-0",attrs:{color:"teal lighten-5"}},[a("v-alert",{staticClass:"mx-3",attrs:{value:!0,color:"teal darken-1",type:"info"}},[t._v("Here you can find the list of all the users of the system, both agnets and admins, with there status of activeness")]),a("v-card-title",[a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"search",label:"Search",color:"teal darken-2","single-line":"","hide-details":"",clearable:""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("v-data-table",{staticClass:"elevation-3",attrs:{headers:t.headers,items:t.agents,search:t.search,loading:t.loading,"item-key":"index"},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[a("v-badge",{attrs:{right:"",color:"transparent"},scopedSlots:t._u([{key:"badge",fn:function(){return[1==e.item.is_admin?a("span",[a("v-icon",{attrs:{"x-small":"",color:"teal darken-3"}},[t._v("fas fa-crown")])],1):a("span",[a("v-icon",{attrs:{"x-small":"",color:"teal"}},[t._v("fas fa-hard-hat")])],1)]},proxy:!0}],null,!0)},[t._v("\n          "+t._s(e.item.index)+"\n        ")])],1),e.item.is_active?a("td",{staticClass:"text-lg-center"},[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){return[a("v-chip",t._g({attrs:{small:"","text-color":"teal darken-2"}},e.on),[a("v-icon",{attrs:{small:""}},[t._v("fas fa-eye")])],1)]}}],null,!0)},[a("span",[t._v("Agent is active")])])],1):a("td",{staticClass:"text-lg-center"},[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){return[a("v-chip",t._g({attrs:{small:"","text-color":"grey darken-2"}},e.on),[a("v-icon",{attrs:{small:""}},[t._v("fas fa-eye-slash")])],1)]}}],null,!0)},[a("span",[t._v("Agent is not active")])])],1),a("td",[t._v(t._s(e.item.first_name))]),a("td",[t._v(t._s(e.item.last_name.toUpperCase()))]),a("td",[t._v(t._s(e.item.email))]),a("td",[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(r){return[a("v-btn",t._g({attrs:{icon:""},on:{click:function(a){return t.resetPassword(e.item.id)}}},r.on),[a("v-icon",{attrs:{small:"",color:"teal darken-2"}},[t._v("fas fa-power-off")])],1)]}}],null,!0)},[a("span",[t._v("Reset The Password Of This User Account")])]),a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(r){return[a("v-btn",t._g({attrs:{icon:""},on:{click:function(a){return t.showConfirmDeleteDialog(e.item.id)}}},r.on),[a("v-icon",{attrs:{small:"",color:"red darken-2"}},[t._v("fas fa-user-minus")])],1)]}}],null,!0)},[a("span",[t._v("Delete This User Account")])])],1)]}}])},[a("v-progress-linear",{attrs:{slot:"progress",color:"teal darken-2",indeterminate:""},slot:"progress"}),a("v-alert",{attrs:{slot:"no-results",value:!0,color:"error",icon:"warning"},slot:"no-results"},[t._v('Your search for "'+t._s(t.search)+'" found no results.')])],1),a("v-dialog",{attrs:{persistent:"",width:"500"},model:{value:t.confirmeDeleteDialog,callback:function(e){t.confirmeDeleteDialog=e},expression:"confirmeDeleteDialog"}},[a("v-card",{attrs:{color:"teal lighten-5",dark:""}},[a("v-card-title",{staticClass:"teal--text text--darken-2 headline"},[a("v-icon",{attrs:{color:"teal darken-2",large:"",left:""}},[t._v("fas fa-exclamation-circle")]),t._v("Confirm Deletion\n      ")],1),a("v-divider"),a("v-card-text",{staticClass:"font-weight-bold teal lighten-5 teal--text text--darken-2"},[t._v("Confirm the deletion of this agent?")]),a("v-card-actions",[a("v-btn",{staticClass:"teal--text lighten-1",attrs:{flat:""},on:{click:function(e){return t.cancelConfirmDeleteDialog()}}},[t._v("Cancel")]),a("v-spacer"),a("v-btn",{staticClass:"white--text",attrs:{color:"red lighten-1"},on:{click:function(e){return t.deleteAgent()}}},[t._v("Yes")])],1)],1)],1),a("v-dialog",{attrs:{persistent:"",width:"400"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",{attrs:{color:"teal lighten-5",dark:""}},[a("v-card-title",{staticClass:"teal--text text--darken-2 headline"},[t._v("Agent Password Reset")]),a("v-progress-linear",{staticClass:"pa-0 mb-0",attrs:{indeterminate:"",color:"teal darken-2",active:t.loadingPass}}),a("v-card-text",{staticClass:"font-weight-bold black--text"},[t._v(t._s(t.dialogContent))]),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticClass:"teal--text",attrs:{flat:""},on:{click:function(e){t.dialog=!1}}},[t._v("Ok")])],1)],1)],1)],1)},o=[],i=a("cebc"),l=(a("96cf"),a("3b8d")),c=a("1637"),u=a("2f62"),d={data:function(){return{search:"",dialog:!1,dialogContent:"Please stand by",loadingPass:!0,loading:!0,confirmeDeleteDialog:!1,headers:[{text:"#",value:"index"},{text:"Activeness",value:"is_active"},{text:"First Name",value:"first_name"},{text:"Last Name",value:"last_name"},{text:"Email",value:"email"},{text:"Operations",value:"delete"}],agents:[],selectedAgentId:-1,snackbarContent:"",snackbarColor:"",snackbar:!1}},created:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.refrechAgentsList();case 1:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),computed:{},methods:Object(i["a"])({},Object(u["b"])(["SHOW_SNACKBAR","TOGGLE_SB_VISIBILITY"]),{refrechAgentsList:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c["a"].getAgents().then(function(t){e.agents=t,e.loading=!1}).catch(function(t){e.snackbar=!0,e.snackbarColor="error",e.snackbarContent=t,e.loading=!1});case 2:case"end":return t.stop()}},t)}));function e(){return t.apply(this,arguments)}return e}(),showConfirmDeleteDialog:function(t){this.confirmeDeleteDialog=!0,this.selectedAgentId=t},cancelConfirmDeleteDialog:function(){this.confirmeDeleteDialog=!1,this.selectedAgentId=-1},deleteAgent:function(){var t=this;-1==this.selectedAgentId?this.showErrorSnackbar("Invalide agent id!"):c["a"].deleteAgentById(this.selectedAgentId).then(function(e){for(var a=0;a<t.agents.length;a++)t.agents[a].id==t.selectedAgentId&&t.agents.splice(a,1);t.cancelConfirmDeleteDialog(),//! just to hide it
t.showSuccessSnackbar(e)}).catch(function(e){t.showErrorSnackbar(e),t.loading=!1})},resetPassword:function(t){var e=this;this.dialog=!0,c["a"].resetAgentPassword(t).then(function(t){e.loadingPass=!1,e.snackbar=!0,e.snackbarColor="success",e.snackbarContent=t.data.success,e.dialogContent="The New Password is: "+t.data.password}).catch(function(t){e.snackbar=!0,e.snackbarColor="error",e.snackbarContent=t})},showSuccessSnackbar:function(t){var e=this;this.TOGGLE_SB_VISIBILITY(!0),this.SHOW_SNACKBAR({color:"success",content:t}),setTimeout(function(){e.TOGGLE_SB_VISIBILITY(!1)},5e3)},showErrorSnackbar:function(t){var e=this;this.TOGGLE_SB_VISIBILITY(!0),this.SHOW_SNACKBAR({color:"error",content:t}),setTimeout(function(){e.TOGGLE_SB_VISIBILITY(!1)},5e3)}})},m=d,v=a("2877"),f=Object(v["a"])(m,n,o,!1,null,null,null),h=f.exports,p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{ref:"form",staticClass:"elevation-0",attrs:{color:"teal lighten-5"}},[a("v-card-text",{staticClass:"mt-0 pt-3"},[a("v-alert",{staticClass:"mx-3",attrs:{value:!0,color:"teal darken-1",icon:"check_circle"}},[t._v('You can create a new agnets and assign admin priviliges to them by checking the box "Add as admin"')]),a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{"error-messages":t.firstNameErrors,counter:50,label:"First Name",required:"",color:"teal darken-1"},on:{input:function(e){return t.$v.firstName.$touch()},blur:function(e){return t.$v.firstName.$touch()}},model:{value:t.firstName,callback:function(e){t.firstName=e},expression:"firstName"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{"error-messages":t.lastNameErrors,counter:50,label:"Last Name",required:"",color:"teal darken-1"},on:{input:function(e){return t.$v.lastName.$touch()},blur:function(e){return t.$v.lastName.$touch()}},model:{value:t.lastName,callback:function(e){t.lastName=e},expression:"lastName"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{"error-messages":t.emailErrors,label:"E-mail",required:"",color:"teal darken-1"},on:{input:function(e){return t.$v.email.$touch()},blur:function(e){return t.$v.email.$touch()}},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{"error-messages":t.passwordErrors,counter:0,type:"password",label:"Password",required:"",color:"teal darken-1"},on:{input:function(e){return t.$v.password.$touch()},blur:function(e){return t.$v.password.$touch()}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[a("v-text-field",{attrs:{"error-messages":t.passwordConfirmationErrors,counter:0,type:"password",label:"Confirm Password",required:"",color:"teal darken-1"},on:{input:function(e){return t.$v.password.$touch()},blur:function(e){return t.$v.password.$touch()}},model:{value:t.passwordConfirmation,callback:function(e){t.passwordConfirmation=e},expression:"passwordConfirmation"}})],1),a("v-flex",{attrs:{sm12:"",md12:"",lg7:""}},[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("v-checkbox",t._g({attrs:{color:"teal darken-3"},scopedSlots:t._u([{key:"label",fn:function(){return[a("div",[t._v("Add as admin")])]},proxy:!0}],null,!0),model:{value:t.isAdminCheckbox,callback:function(e){t.isAdminCheckbox=e},expression:"isAdminCheckbox"}},r))]}}])},[t._v("\n            Give admin priviliges to the newly created agent\n          ")])],1)],1)],1)],1),a("v-divider"),a("v-card-actions",[a("v-btn",{staticClass:"text--teal",attrs:{color:"teal",flat:""},on:{click:t.clear}},[t._v("Clear")]),a("v-spacer"),a("v-btn",{staticClass:"white--text",attrs:{color:"teal"},on:{click:t.submit}},[t._v("Submit")])],1)],1)},g=[],b=a("1dce"),_=a("b5ae"),k={mixins:[b["validationMixin"]],validations:{firstName:{required:_["required"],maxLength:Object(_["maxLength"])(50)},lastName:{required:_["required"],maxLength:Object(_["maxLength"])(50)},email:{required:_["required"],email:_["email"]},password:{required:_["required"],minLength:Object(_["minLength"])(6)}},data:function(){return{firstName:"",lastName:"",email:"",password:"",passwordConfirmation:"",snackbarContent:"",isAdminCheckbox:!1,snackbarColor:"",snackbar:!1}},computed:{firstNameErrors:function(){var t=[];return this.$v.firstName.$dirty?(!this.$v.firstName.maxLength&&t.push("First Name must be at most 10 characters long"),!this.$v.firstName.required&&t.push("First Name is required."),t):t},lastNameErrors:function(){var t=[];return this.$v.lastName.$dirty?(!this.$v.lastName.maxLength&&t.push("Last Name must be at most 10 characters long"),!this.$v.lastName.required&&t.push("Last Name is required."),t):t},emailErrors:function(){var t=[];return this.$v.email.$dirty?(!this.$v.email.email&&t.push("Must be valid e-mail"),!this.$v.email.required&&t.push("E-mail is required"),t):t},passwordErrors:function(){var t=[];return this.$v.password.$dirty?(!this.$v.password.minLength&&t.push("Password must be at least 6 caracters"),!this.$v.password.required&&t.push("Password is required"),t):t},passwordConfirmationErrors:function(){var t=[];return this.password!=this.passwordConfirmation&&t.push("Passwords do not matche"),t}},methods:Object(i["a"])({},Object(u["b"])(["SHOW_SNACKBAR","TOGGLE_SB_VISIBILITY"]),{submit:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.$v.$touch(),this.$v.$invalid){t.next=4;break}return t.next=4,c["a"].createAgent({firstName:this.firstName,lastName:this.lastName,email:this.email,password:this.password,is_admin:this.isAdminCheckbox}).then(function(t){e.showSuccessSnackbar(t),e.clear()}).catch(function(t){e.showErrorSnackbar(t),e.loading=!1});case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),showSuccessSnackbar:function(t){var e=this;this.TOGGLE_SB_VISIBILITY(!0),this.SHOW_SNACKBAR({color:"success",content:t}),setTimeout(function(){e.TOGGLE_SB_VISIBILITY(!1)},5e3)},showErrorSnackbar:function(t){var e=this;this.TOGGLE_SB_VISIBILITY(!0),this.SHOW_SNACKBAR({color:"error",content:t}),setTimeout(function(){e.TOGGLE_SB_VISIBILITY(!1)},5e3)},clear:function(){this.$v.$reset(),this.firstName="",this.lastName="",this.email="",this.password="",this.passwordConfirmation="",this.isAdminCheckbox=!1}})},x=k,w=Object(v["a"])(x,p,g,!1,null,null,null),C=w.exports,S={data:function(){return{title:"Agents List",disableAddBtn:!0,currentComponent:h}},methods:{mounteAddAgentComponent:function(){this.title="Add New Agent",this.currentComponent=C},mounteAgentsTableComponent:function(){this.title="Agents List",this.currentComponent=h}}},A=S,I=Object(v["a"])(A,r,s,!1,null,null,null);e["default"]=I.exports}}]);
//# sourceMappingURL=agents.2f2ebd3c.js.map