(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d7c42"],{"77e1":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-card",{staticClass:"pt-3 elevation-0",attrs:{color:"teal lighten-5"}},[s("v-alert",{staticClass:"mx-3",attrs:{value:!0,color:"teal darken-1",type:"info"}},[t._v("Here you can find the list of all the users of the system, both workers and admins, with there status of activeness")]),s("v-card-title",[s("v-spacer"),s("v-text-field",{attrs:{"append-icon":"search",label:"Search",color:"teal darken-2","single-line":"","hide-details":"",clearable:""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),s("v-data-table",{staticClass:"elevation-3",attrs:{headers:t.headers,items:t.agents,search:t.search,loading:t.loading,"item-key":"index"},scopedSlots:t._u([{key:"items",fn:function(e){return[s("td",[s("v-badge",{attrs:{right:"",color:"transparent"},scopedSlots:t._u([{key:"badge",fn:function(){return[1==e.item.is_admin?s("span",[s("v-icon",{attrs:{"x-small":"",color:"teal darken-3"}},[t._v("fas fa-crown")])],1):s("span",[s("v-icon",{attrs:{"x-small":"",color:"teal"}},[t._v("fas fa-hard-hat")])],1)]},proxy:!0}],null,!0)},[t._v("\n          "+t._s(e.item.index)+"\n        ")])],1),e.item.is_active?s("td",{staticClass:"text-lg-center"},[s("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){return[s("v-chip",t._g({attrs:{small:"","text-color":"teal darken-2"}},e.on),[s("v-icon",{attrs:{small:""}},[t._v("fas fa-eye")])],1)]}}],null,!0)},[s("span",[t._v("Worker is active")])])],1):s("td",{staticClass:"text-lg-center"},[s("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){return[s("v-chip",t._g({attrs:{small:"","text-color":"grey darken-2"}},e.on),[s("v-icon",{attrs:{small:""}},[t._v("fas fa-eye-slash")])],1)]}}],null,!0)},[s("span",[t._v("Worker is not active")])])],1),s("td",[t._v(t._s(e.item.first_name))]),s("td",[t._v(t._s(e.item.last_name.toUpperCase()))]),s("td",[t._v(t._s(e.item.email))]),s("td",[s("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(a){return[s("v-btn",t._g({attrs:{icon:""},on:{click:function(s){return t.confirmResetingPassword(e.item.id)}}},a.on),[s("v-icon",{attrs:{small:"",color:"teal darken-2"}},[t._v("fas fa-power-off")])],1)]}}],null,!0)},[s("span",[t._v("Reset the password of this user account")])]),s("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(a){return[s("v-btn",t._g({attrs:{icon:""},on:{click:function(s){return t.showConfirmDeleteDialog(e.item.id)}}},a.on),[s("v-icon",{attrs:{small:"",color:"red darken-2"}},[t._v("fas fa-user-minus")])],1)]}}],null,!0)},[s("span",[t._v("Delete This User Account")])])],1)]}}])},[s("v-progress-linear",{attrs:{slot:"progress",color:"teal darken-2",indeterminate:""},slot:"progress"}),s("v-alert",{attrs:{slot:"no-results",value:!0,color:"error",icon:"warning"},slot:"no-results"},[t._v('Your search for "'+t._s(t.search)+'" found no results.')])],1),s("v-dialog",{attrs:{persistent:"",width:"500"},model:{value:t.confirmeDeleteDialog,callback:function(e){t.confirmeDeleteDialog=e},expression:"confirmeDeleteDialog"}},[s("v-card",{attrs:{color:"teal lighten-5",dark:""}},[s("v-card-title",{staticClass:"teal--text text--darken-2 headline"},[s("v-icon",{attrs:{color:"teal darken-2",large:"",left:""}},[t._v("fas fa-exclamation-circle")]),t._v("Confirm Deletion\n      ")],1),s("v-divider"),s("v-card-text",{staticClass:"font-weight-bold teal lighten-5 teal--text text--darken-2"},[t._v("Confirm the deletion of this agent?")]),s("v-card-actions",[s("v-btn",{staticClass:"teal--text lighten-1",attrs:{flat:""},on:{click:function(e){return t.cancelConfirmDeleteDialog()}}},[t._v("Cancel")]),s("v-spacer"),s("v-btn",{staticClass:"white--text",attrs:{color:"red lighten-1"},on:{click:function(e){return t.deleteAgent()}}},[t._v("Yes")])],1)],1)],1),s("v-dialog",{attrs:{persistent:"",width:"400"},model:{value:t.confirmResetingPasswordDialog,callback:function(e){t.confirmResetingPasswordDialog=e},expression:"confirmResetingPasswordDialog"}},[s("v-card",{attrs:{color:"teal lighten-5",dark:""}},[s("v-card-title",{staticClass:"teal--text text--darken-2 headline"},[t._v("Worker Password Reset")]),s("v-card-text",{staticClass:"font-weight-light teal--text text--darken-4"},[t._v("\n        Are you sure you want to reset the password of the user\n        "),s("p",{staticClass:"font-weight-medium"},[t._v(t._s(t.selectedUserFullName))])]),s("v-card-actions",[s("v-btn",{staticClass:"teal--text",attrs:{flat:""},on:{click:function(e){t.confirmResetingPasswordDialog=!1}}},[t._v("Close")]),s("v-spacer"),s("v-btn",{staticClass:"white--text",attrs:{color:"red lighten-1"},on:{click:function(e){return t.resetAgentPassword()}}},[t._v("Reset")])],1)],1)],1),s("v-dialog",{attrs:{persistent:"",width:"400"},model:{value:t.resetingPasswordDialog,callback:function(e){t.resetingPasswordDialog=e},expression:"resetingPasswordDialog"}},[s("v-card",{attrs:{color:"teal lighten-5",dark:""}},[s("v-card-title",{staticClass:"teal--text text--darken-2 headline"},[t._v("Worker Password Reset")]),s("v-progress-linear",{staticClass:"pa-0 mb-0",attrs:{indeterminate:"",color:"teal darken-2",active:t.loadingPass}}),s("v-card-text",{staticClass:"font-weight-light teal--text text--darken-4 py-0 mb-0"},[t._v("\n        The new password:\n        "),s("span",{staticClass:"font-weight-medium red--text"},[t._v(t._s(t.newPass))])]),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"white--text",attrs:{color:"teal darken-2"},on:{click:function(e){return t.hideResetPasswordDialog()}}},[t._v("Ok")])],1)],1)],1)],1)},n=[],r=s("cebc"),o=(s("96cf"),s("3b8d")),i=s("1637"),l=s("2f62"),c={data:function(){return{search:"",confirmResetingPasswordDialog:!1,resetingPasswordDialog:!1,newPass:"Reseting ...",loadingPass:!0,loading:!0,confirmeDeleteDialog:!1,headers:[{text:"#",value:"index"},{text:"Activeness",value:"is_active"},{text:"First Name",value:"first_name"},{text:"Last Name",value:"last_name"},{text:"Email",value:"email"},{text:"Operations",value:"delete"}],agents:[],selectedAgentId:-1,snackbarContent:"",snackbarColor:"",snackbar:!1}},sockets:{onUserDeleted:function(t){this.removeDeletedUser(t.userId)},OnNewUserAdded:function(t){this.addNewUser(t.user[0])}},computed:{selectedUserFullName:function(){for(var t="",e=0;e<this.agents.length;e++)if(this.agents[e].id==this.selectedAgentId){t="".concat(this.agents[e].last_name.toUpperCase()," ").concat(this.agents[e].first_name);break}return t}},created:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.refrechAgentsList();case 1:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),methods:Object(r["a"])({},Object(l["b"])(["SHOW_SNACKBAR","TOGGLE_SB_VISIBILITY"]),{addNewUser:function(t){this.agents.push(t),this.SHOW_SNACKBAR({color:"success",content:"A new user was added, full name: ".concat(t.firstName," ").concat(t.lastName)})},removeDeletedUser:function(t){for(var e=0;e<this.agents.length;e++)if(this.agents[e].id==t){this.agents.splice(e,1);break}},confirmResetingPassword:function(t){this.selectedAgentId=t,this.confirmResetingPasswordDialog=!0},hideResetPasswordDialog:function(){this.resetingPasswordDialog=!1,this.newPass="Reseting ..."},refrechAgentsList:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].getAgents().then(function(t){e.agents=t,e.loading=!1}).catch(function(t){e.showErrorSnackbar(t),e.loading=!1});case 2:case"end":return t.stop()}},t)}));function e(){return t.apply(this,arguments)}return e}(),showConfirmDeleteDialog:function(t){this.confirmeDeleteDialog=!0,this.selectedAgentId=t},cancelConfirmDeleteDialog:function(){this.confirmeDeleteDialog=!1,this.selectedAgentId=-1},deleteAgent:function(){var t=this;-1==this.selectedAgentId?this.showErrorSnackbar("Invalide agent id!"):i["a"].deleteAgentById(this.selectedAgentId).then(function(e){t.cancelConfirmDeleteDialog(),//! just to hide it
t.showSuccessSnackbar(e)}).catch(function(e){t.showErrorSnackbar(e),t.loading=!1})},resetAgentPassword:function(){var t=this;this.confirmResetingPasswordDialog=!1,this.resetingPasswordDialog=!0,-1!=this.selectedAgentId?i["a"].resetAgentPassword(this.selectedAgentId).then(function(e){t.loadingPass=!1,t.showSuccessSnackbar(e.data.success),t.newPass=e.data.password}).catch(function(e){t.showErrorSnackbar(e)}):this.showErrorSnackbar("No id is selected!!")},showSuccessSnackbar:function(t){var e=this;this.TOGGLE_SB_VISIBILITY(!0),this.SHOW_SNACKBAR({color:"success",content:t}),setTimeout(function(){e.TOGGLE_SB_VISIBILITY(!1)},5e3)},showErrorSnackbar:function(t){var e=this;this.TOGGLE_SB_VISIBILITY(!0),this.SHOW_SNACKBAR({color:"error",content:t}),setTimeout(function(){e.TOGGLE_SB_VISIBILITY(!1)},5e3)}})},d=c,u=s("2877"),h=Object(u["a"])(d,a,n,!1,null,null,null);e["default"]=h.exports}}]);
//# sourceMappingURL=chunk-2d0d7c42.4e0ec3d1.js.map